{"remainingRequest":"D:\\SSAFY\\webmobile-sub2\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\SSAFY\\webmobile-sub2\\frontend\\src\\components\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\SSAFY\\webmobile-sub2\\frontend\\src\\components\\Login.vue","mtime":1563958359101},{"path":"D:\\SSAFY\\webmobile-sub2\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1563870748243},{"path":"D:\\SSAFY\\webmobile-sub2\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1563870747768},{"path":"D:\\SSAFY\\webmobile-sub2\\frontend\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1563870756719},{"path":"D:\\SSAFY\\webmobile-sub2\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1563870748243},{"path":"D:\\SSAFY\\webmobile-sub2\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1563870756570}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport FirebaseService from \"@/services/FirebaseService\";\r\nimport { VFBLogin as VFacebookLogin } from \"vue-facebook-login-component\";\r\nimport RestService from \"@/services/RestService\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            dialog: false,\r\n            id: \"\",\r\n            password: \"\",\r\n            check: [\r\n                {\r\n                    cnt: \"\"\r\n                }\r\n            ],\r\n            token: {\r\n                token: \"\",\r\n                refresh: \"\"\r\n            }\r\n        };\r\n    },\r\n    beforeMount() {\r\n        this.insertLog();\r\n    },\r\n    components: {\r\n        VFacebookLogin\r\n    },\r\n    methods: {\r\n        async loginWithGoogle() {\r\n            const result = await FirebaseService.loginWithGoogle();\r\n            this.$store.state.accessToken = result.credential.accessToken;\r\n            this.$store.state.user = result.user;\r\n            this.$store.state.grade = \"1\";\r\n        },\r\n        async loginWithFacebook() {\r\n        const result = await FirebaseService.loginWithFacebook();\r\n        this.$store.state.accessToken = result.credential.accessToken;\r\n        this.$store.state.user = result.user;\r\n            this.$store.state.grade = \"1\";\r\n        if(this.$store.state.accessToken != '' && this.$store.state.user != '') {\r\n         this.$session.set('email', this.$store.state.user.email);\r\n      }\r\n      this.$emit('update:loginvisible', !this.loginvisible);\r\n      },\r\n        async insertLog() {\r\n            this.insertLog = await RestService.insertLog(\"LoginPage\");\r\n        },\r\n        async defaultLogin() {\r\n            this.check = await RestService.getUser(this.id);\r\n            if (this.check[0].cnt == 0) {\r\n                alert(\"ID가 존재하지 않습니다.\");\r\n            } else {\r\n                this.token = await RestService.loginUser(\r\n                    this.id,\r\n                    this.password\r\n                );\r\n                if (this.token.token == null) {\r\n                    alert(\"비밀번호를 확인해주세요.\");\r\n                } else {\r\n                    alert(\"로그인 성공!\");\r\n                    this.$store.state.accessToken = this.token.token;\r\n                    this.$store.state.user = this.id;\r\n                    this.$store.state.grade = this.token.grade;\r\n                    this.dialog = false;\r\n                    this.clear_user();\r\n                }\r\n            }\r\n        },\r\n        clear_user() {\r\n            this.id = \"\";\r\n            this.password = \"\";\r\n        },\r\n    },\r\n    mounted() {\r\n        //console.log(this.$store.state);\r\n    },\r\n};\r\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <v-layout>\r\n        <v-dialog v-model=\"dialog\" max-width=\"500\">\r\n            <template v-slot:activator=\"{ on }\">\r\n                <v-btn class=\"headerButton\" icon v-on=\"on\">\r\n                        <v-icon color=\"white\">perm_identity</v-icon>\r\n                </v-btn>\r\n                <v-btn class=\"sidebarButton\" flat v-on=\"on\" style=\"width: 160px; left: 0px; height: 48px; z-index: 2;\" fixed>\r\n                    <v-icon style=\"margin-right: auto; margin-left: 17px;\">perm_identity</v-icon>\r\n                </v-btn>\r\n            </template>\r\n\r\n            <v-card>\r\n                <v-card-title class=\"headline\">Login</v-card-title>\r\n                <div class=\"form\">\r\n                    <v-text-field v-model=\"id\" label=\"ID*\" required></v-text-field>\r\n                    <v-text-field v-model=\"password\" label=\"Password*\" required></v-text-field>\r\n                </div>\r\n                <small>*indicates required field</small>\r\n\r\n                <v-btn round color=\"#df4a31\" dark v-on:click=\"loginWithGoogle\" style=\"width:80%;\">\r\n                    <v-icon size=\"25\" class=\"mr-2\">fa-google</v-icon>Google 로그인\r\n                </v-btn>\r\n                <br />\r\n                <v-btn color=\"blue\" v-on:click=\"loginWithFacebook\" style=\"width:80%;\" dark round>\r\n                <v-icon size=\"25\" class=\"mr-2\">fa-facebook</v-icon>\r\n                Facebook 로그인\r\n                </v-btn>\r\n\r\n\r\n\r\n                <br />\r\n\r\n                <v-card-actions>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn color=\"primary\" dark @click=\"defaultLogin()\">Login</v-btn>\r\n                    <v-btn color=\"green darken-1\" flat @click>Forgot password?</v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n    </v-layout>\r\n</template>\r\n\r\n<script>\r\nimport FirebaseService from \"@/services/FirebaseService\";\r\nimport { VFBLogin as VFacebookLogin } from \"vue-facebook-login-component\";\r\nimport RestService from \"@/services/RestService\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            dialog: false,\r\n            id: \"\",\r\n            password: \"\",\r\n            check: [\r\n                {\r\n                    cnt: \"\"\r\n                }\r\n            ],\r\n            token: {\r\n                token: \"\",\r\n                refresh: \"\"\r\n            }\r\n        };\r\n    },\r\n    beforeMount() {\r\n        this.insertLog();\r\n    },\r\n    components: {\r\n        VFacebookLogin\r\n    },\r\n    methods: {\r\n        async loginWithGoogle() {\r\n            const result = await FirebaseService.loginWithGoogle();\r\n            this.$store.state.accessToken = result.credential.accessToken;\r\n            this.$store.state.user = result.user;\r\n            this.$store.state.grade = \"1\";\r\n        },\r\n        async loginWithFacebook() {\r\n        const result = await FirebaseService.loginWithFacebook();\r\n        this.$store.state.accessToken = result.credential.accessToken;\r\n        this.$store.state.user = result.user;\r\n            this.$store.state.grade = \"1\";\r\n        if(this.$store.state.accessToken != '' && this.$store.state.user != '') {\r\n         this.$session.set('email', this.$store.state.user.email);\r\n      }\r\n      this.$emit('update:loginvisible', !this.loginvisible);\r\n      },\r\n        async insertLog() {\r\n            this.insertLog = await RestService.insertLog(\"LoginPage\");\r\n        },\r\n        async defaultLogin() {\r\n            this.check = await RestService.getUser(this.id);\r\n            if (this.check[0].cnt == 0) {\r\n                alert(\"ID가 존재하지 않습니다.\");\r\n            } else {\r\n                this.token = await RestService.loginUser(\r\n                    this.id,\r\n                    this.password\r\n                );\r\n                if (this.token.token == null) {\r\n                    alert(\"비밀번호를 확인해주세요.\");\r\n                } else {\r\n                    alert(\"로그인 성공!\");\r\n                    this.$store.state.accessToken = this.token.token;\r\n                    this.$store.state.user = this.id;\r\n                    this.$store.state.grade = this.token.grade;\r\n                    this.dialog = false;\r\n                    this.clear_user();\r\n                }\r\n            }\r\n        },\r\n        clear_user() {\r\n            this.id = \"\";\r\n            this.password = \"\";\r\n        },\r\n    },\r\n    mounted() {\r\n        //console.log(this.$store.state);\r\n    },\r\n};\r\n</script>\r\n\r\n<style>\r\n.headline {\r\n    padding-bottom: 50px;\r\n}\r\n\r\n.modalface {\r\n    padding-left: 10%;\r\n    padding-right: 11%;\r\n    width: 100%;\r\n}\r\n\r\n.form {\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n}\r\n\r\n@media screen and (max-width: 599px) {\r\n    .headerButton {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@media screen and (min-width: 600px) {\r\n    .sidebarButton {\r\n        display: none;\r\n    }\r\n}\r\n</style>\r\n"]}]}